import{t as y,C as v,r as n,j as e,S as d,K as C,I as L,H as E,T as c,B as I,L as S,n as b,M as k,N as D,E as B,G as F,F as A,W as P}from"./index-CO2zk-35.js";import{T as h,L as T}from"./LoadingButton-BpZaltbh.js";import{C as K}from"./Card-BsTQANlG.js";import"./isMuiElement-BvOguQpZ.js";import"./Select-tk9dLo85.js";function R(){const p=y(),x=v(),[a,u]=n.useState(!1),[g,o]=n.useState(!1),[t,m]=n.useState({identifier:"",password:""}),[r,f]=n.useState(null),i=s=>{m({...t,[s.target.name]:s.target.value})},j=s=>{s.key==="Enter"&&l()},l=async()=>{o(!0);try{const s=await B.post(`${F.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),A.set("jwt",s.data.jwt,{expires:7}),x.push("/")}catch(s){console.error("Authentication error",s),f("Invalid email or password.")}finally{o(!1)}},w=e.jsxs(e.Fragment,{children:[e.jsxs(d,{spacing:3,children:[e.jsx(h,{name:"identifier",label:"Username",value:t.identifier,onChange:i}),e.jsx(h,{name:"password",label:"Password",type:a?"text":"password",value:t.password,onChange:i,onKeyDown:j,InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(L,{onClick:()=>u(!a),edge:"end",children:e.jsx(E,{icon:a?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),r&&e.jsx(c,{color:"error",sx:{mt:1},children:r}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:l,loading:g,children:"Login"})]});return e.jsxs(I,{sx:{...S({color:b(p.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(k,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(K,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",children:"Sign in to BEX Dropship"}),e.jsx(D,{sx:{my:3}}),w]})})]})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Login | BEX Dropship "})}),e.jsx(R,{})]})}export{H as default};
