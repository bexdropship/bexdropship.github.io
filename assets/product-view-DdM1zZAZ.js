import{a2 as ta,j as o,k as na,g as ia,h as Y,l as n,_ as k,n as m,r as p,i as ca,a as sa,a3 as da,a4 as J,b as z,f as pa,Q as ua,T as Q,P as d,B as ba,R as ga,K as fa,I as va,U as ya,E as xa,F as Ca,S as $a,V as ha,G as ma}from"./index-BCR1pe4k.js";import{T as W,a as $,b as ka,c as ja,d as Ia,e as Pa,f as Ra,g as Ta,h as Sa}from"./search-fill-C-jn2xJo.js";import{O as Oa}from"./Select-DezMCzrF.js";import{C as za}from"./Container-BizTsnAp.js";import{C as Da}from"./Card-N6P1_fiZ.js";const Na=ta(o.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function _a(a){return ia("MuiChip",a)}const l=na("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Ea=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],La=a=>{const{classes:e,disabled:i,size:r,color:t,iconColor:c,onDelete:y,clickable:f,variant:v}=a,C={root:["root",v,i&&"disabled",`size${n(r)}`,`color${n(t)}`,f&&"clickable",f&&`clickableColor${n(t)}`,y&&"deletable",y&&`deletableColor${n(t)}`,`${v}${n(t)}`],label:["label",`label${n(r)}`],avatar:["avatar",`avatar${n(r)}`,`avatarColor${n(t)}`],icon:["icon",`icon${n(r)}`,`iconColor${n(c)}`],deleteIcon:["deleteIcon",`deleteIcon${n(r)}`,`deleteIconColor${n(t)}`,`deleteIcon${n(v)}Color${n(t)}`]};return pa(C,_a,e)},Fa=Y("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:i}=a,{color:r,iconColor:t,clickable:c,onDelete:y,size:f,variant:v}=i;return[{[`& .${l.avatar}`]:e.avatar},{[`& .${l.avatar}`]:e[`avatar${n(f)}`]},{[`& .${l.avatar}`]:e[`avatarColor${n(r)}`]},{[`& .${l.icon}`]:e.icon},{[`& .${l.icon}`]:e[`icon${n(f)}`]},{[`& .${l.icon}`]:e[`iconColor${n(t)}`]},{[`& .${l.deleteIcon}`]:e.deleteIcon},{[`& .${l.deleteIcon}`]:e[`deleteIcon${n(f)}`]},{[`& .${l.deleteIcon}`]:e[`deleteIconColor${n(r)}`]},{[`& .${l.deleteIcon}`]:e[`deleteIcon${n(v)}Color${n(r)}`]},e.root,e[`size${n(f)}`],e[`color${n(r)}`],c&&e.clickable,c&&r!=="default"&&e[`clickableColor${n(r)})`],y&&e.deletable,y&&r!=="default"&&e[`deletableColor${n(r)}`],e[v],e[`${v}${n(r)}`]]}})(({theme:a,ownerState:e})=>{const i=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return k({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${l.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${l.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:i,fontSize:a.typography.pxToRem(12)},[`& .${l.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${l.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${l.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${l.icon}`]:k({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&k({color:a.vars?a.vars.palette.Chip.defaultIconColor:i},e.color!=="default"&&{color:"inherit"})),[`& .${l.deleteIcon}`]:k({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:m(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:m(a.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[e.color].contrastTextChannel} / 0.7)`:m(a.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(a.vars||a).palette[e.color].main,color:(a.vars||a).palette[e.color].contrastText},e.onDelete&&{[`&.${l.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:m(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${l.focusVisible}`]:{backgroundColor:(a.vars||a).palette[e.color].dark}})},({theme:a,ownerState:e})=>k({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:m(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${l.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:m(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${l.focusVisible}`]:{backgroundColor:(a.vars||a).palette[e.color].dark}}),({theme:a,ownerState:e})=>k({},e.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${l.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${l.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${l.avatar}`]:{marginLeft:4},[`& .${l.avatarSmall}`]:{marginLeft:2},[`& .${l.icon}`]:{marginLeft:4},[`& .${l.iconSmall}`]:{marginLeft:2},[`& .${l.deleteIcon}`]:{marginRight:5},[`& .${l.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(a.vars||a).palette[e.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / 0.7)`:m(a.palette[e.color].main,.7)}`,[`&.${l.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:m(a.palette[e.color].main,a.palette.action.hoverOpacity)},[`&.${l.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:m(a.palette[e.color].main,a.palette.action.focusOpacity)},[`& .${l.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[e.color].mainChannel} / 0.7)`:m(a.palette[e.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[e.color].main}}})),Va=Y("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,e)=>{const{ownerState:i}=a,{size:r}=i;return[e.label,e[`label${n(r)}`]]}})(({ownerState:a})=>k({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.size==="small"&&{paddingLeft:8,paddingRight:8}));function X(a){return a.key==="Backspace"||a.key==="Delete"}const Ma=p.forwardRef(function(e,i){const r=ca({props:e,name:"MuiChip"}),{avatar:t,className:c,clickable:y,color:f="default",component:v,deleteIcon:C,disabled:j=!1,icon:h,label:x,onClick:S,onDelete:b,onKeyDown:L,onKeyUp:F,size:H="medium",variant:V="filled",tabIndex:M,skipFocusWhenDisabled:K=!1}=r,U=sa(r,Ea),R=p.useRef(null),q=da(R,i),B=u=>{u.stopPropagation(),b&&b(u)},A=u=>{u.currentTarget===u.target&&X(u)&&u.preventDefault(),L&&L(u)},w=u=>{u.currentTarget===u.target&&(b&&X(u)?b(u):u.key==="Escape"&&R.current&&R.current.blur()),F&&F(u)},D=y!==!1&&S?!0:y,N=D||b?J:v||"div",O=k({},r,{component:N,disabled:j,size:H,color:f,iconColor:p.isValidElement(h)&&h.props.color||f,onDelete:!!b,clickable:D,variant:V}),I=La(O),s=N===J?k({component:v||"div",focusVisibleClassName:I.focusVisible},b&&{disableRipple:!0}):{};let g=null;b&&(g=C&&p.isValidElement(C)?p.cloneElement(C,{className:z(C.props.className,I.deleteIcon),onClick:B}):o.jsx(Na,{className:z(I.deleteIcon),onClick:B}));let P=null;t&&p.isValidElement(t)&&(P=p.cloneElement(t,{className:z(I.avatar,t.props.className)}));let T=null;return h&&p.isValidElement(h)&&(T=p.cloneElement(h,{className:z(I.icon,h.props.className)})),o.jsxs(Fa,k({as:N,className:z(I.root,c),disabled:D&&j?!0:void 0,onClick:S,onKeyDown:A,onKeyUp:w,ref:q,tabIndex:K&&j?-1:M,ownerState:O},s,U,{children:[P||T,o.jsx(Va,{className:z(I.label),ownerState:O,children:x}),g]}))}),Ka={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ua(a,e,i){return a?Math.max(0,(1+a)*e-i):0}function Z({query:a}){return o.jsx(W,{children:o.jsx($,{align:"center",colSpan:6,sx:{py:3},children:o.jsxs(ua,{sx:{textAlign:"center"},children:[o.jsx(Q,{variant:"h6",paragraph:!0,children:"Not found"}),o.jsxs(Q,{variant:"body2",children:["No results found for  ",o.jsxs("strong",{children:['"',a,'"']}),".",o.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}Z.propTypes={query:d.string};function aa({emptyRows:a,height:e}){return a?o.jsx(W,{sx:{...e&&{height:e*a}},children:o.jsx($,{colSpan:9})}):null}aa.propTypes={emptyRows:d.number,height:d.number};function ea({id:a,default_code:e,name:i,category:r,type:t,lst_price:c,description_sale:y,attributes:f,virtual_available:v,qty_available:C,onSelect:j}){const h=x=>`$${x.toFixed(2)}`;return o.jsxs(W,{hover:!0,tabIndex:-1,onClick:()=>j({id:a,default_code:e,name:i,category:r,type:t,lst_price:c,description_sale:y,attributes:f,virtual_available:v,qty_available:C}),children:[o.jsx($,{children:e}),o.jsx($,{children:i}),o.jsx($,{children:r}),o.jsx($,{children:t}),o.jsx($,{children:h(c)}),o.jsx($,{children:y}),o.jsx($,{children:f.map((x,S)=>o.jsx(Ma,{label:x,variant:"outlined"},S))}),o.jsx($,{children:C})]})}ea.propTypes={id:d.any,default_code:d.any,name:d.any,category:d.any,type:d.any,lst_price:d.any,description_sale:d.any,attributes:d.arrayOf(d.string),virtual_available:d.any,qty_available:d.any,onSelect:d.func};function oa({order:a,orderBy:e,headLabel:i,onRequestSort:r}){const t=c=>y=>{r(y,c)};return o.jsx(ka,{children:o.jsx(W,{children:i.map(c=>o.jsx($,{align:c.align||"left",sortDirection:e===c.id?a:!1,sx:{width:c.width,minWidth:c.minWidth},children:o.jsxs(ja,{hideSortIcon:!0,active:e===c.id,direction:e===c.id?a:"desc",onClick:t(c.id),children:[c.label,e===c.id?o.jsx(ba,{sx:{...Ka},children:a==="desc"?"sorted descending":"sorted ascending"}):null]})},c.id))})})}oa.propTypes={order:d.oneOf(["asc","desc"]),orderBy:d.string,headLabel:d.array,onRequestSort:d.func};function la({filterName:a,onFilterName:e,onClickSearch:i,onHitEnter:r}){return o.jsx(ga,{sx:{height:96,display:"flex",justifyContent:"space-between",p:t=>t.spacing(0,1,0,3)},children:o.jsx(Oa,{value:a,onChange:e,onKeyDown:r,placeholder:"Search product...",endAdornment:o.jsx(fa,{position:"end",children:o.jsx(va,{onClick:i,edge:"end",children:o.jsx(ya,{icon:Ia,sx:{color:"text.disabled",width:20,height:20}})})})})})}la.propTypes={filterName:d.string,onFilterName:d.func,onClickSearch:d.func,onHitEnter:d.func};function Ba({showTitle:a,onSelect:e}){const[i,r]=p.useState([]),[t,c]=p.useState(0),[y,f]=p.useState(0),[v,C]=p.useState("asc"),[j,h]=p.useState("name"),[x,S]=p.useState(""),[b,L]=p.useState(25),[F,H]=p.useState(0),V=p.useRef(i),M=p.useRef(b),K=p.useRef(t),U=p.useRef(x);p.useEffect(()=>{V.current=i,M.current=b,K.current=t,U.current=x,R(K.current,M.current,V.current,U.current)},[]);const R=(s,g,P,T,u,G)=>{console.log("Fetching Products");const ra=s+1;let _=`${ma.baseURL}/api-proxy/proxy?method=get&resource=products&page=${ra}&page_size=${g}`;T&&(_+=`&name=${T}`),u&&(_+=`&order=${u}`),G&&(_+=`&orderby=${G}`),console.log(_),xa.get(_,{headers:{Authorization:`Bearer ${Ca.get("jwt")}`}}).then(E=>{console.log(E.data.data),r([...P,...E.data.data]),H(E.data.count)}).catch(E=>{console.error("Error fetching products:",E)})},q=(s,g)=>{console.log("Handling Sort");const P=j===g&&v==="asc";if(g!==""){const T=P?"desc":"asc",u=g;C(T),h(u),B(T,u)}},B=(s,g)=>{console.log(`Sorting ${g} ${s}`),c(0),f(0),R(0,b,[],x,s,g)},A=(s,g)=>{c(g);const P=b*g;P>y&&(f(P),R(g,b,i,x,v,j))},w=s=>{c(0),L(parseInt(s.target.value,10))},D=s=>{S(s.target.value)},N=s=>{s.key==="Enter"&&O()},O=s=>{c(0),R(t,b,[],x)},I=!i.length&&!!x;return o.jsxs(za,{children:[a&&o.jsx($a,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:o.jsx(Q,{variant:"h4",children:"Products"})}),o.jsxs(Da,{children:[o.jsx(la,{filterName:x,onFilterName:D,onClickSearch:O,onHitEnter:N}),o.jsx(ha,{children:o.jsx(Pa,{sx:{overflow:"unset"},children:o.jsxs(Ra,{sx:{minWidth:800},children:[o.jsx(oa,{order:v,orderBy:j,rowCount:i.length,onRequestSort:q,headLabel:[{id:"default_code",label:"Default Code"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"type",label:"Type"},{id:"lst_price",label:"Sale Price"},{id:"description_sale",label:"Description"},{id:"attributes",label:"Attributes"},{id:"qty_available",label:"Quantity on Hand"}]}),o.jsxs(Ta,{children:[i.slice(t*b,t*b+b).map(s=>o.jsx(ea,{id:s.id,default_code:s.default_code,name:s.name,category:s.categ_id.name,type:s.type,lst_price:s.lst_price,description_sale:s.description_sale,attributes:s.product_template_attribute_value_ids.map(g=>`${g.attribute}:${g.name}`),virtual_available:s.virtual_available,qty_available:s.qty_available,onSelect:e},s.id)),o.jsx(aa,{height:77,emptyRows:Ua(t,b,i.length)}),I&&o.jsx(Z,{query:x})]})]})})}),o.jsx(Sa,{page:t,component:"div",count:F,rowsPerPage:b,onPageChange:A,rowsPerPageOptions:[25],onRowsPerPageChange:w})]})]})}Ba.propTypes={showTitle:d.bool,onSelect:d.func};export{Ma as C,Ba as P};
