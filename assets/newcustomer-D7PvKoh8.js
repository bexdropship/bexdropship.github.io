import{C as E,r as i,E as p,F as g,j as e,S as x,M as u,T as w,G as y,W as z}from"./index-BCR1pe4k.js";import{F,T as o,L as R}from"./LoadingButton-uTtwBS7g.js";import{S as f}from"./Select-DezMCzrF.js";import{C as _}from"./Container-BizTsnAp.js";import{C as A}from"./Card-N6P1_fiZ.js";import{u as B}from"./use-auth-fhblAKo1.js";import"./isMuiElement-jBPVHcRJ.js";function L(){const j=E(),[l,C]=i.useState([]),[b,d]=i.useState(!1),[t,h]=i.useState({name:"",ext_dropship_partner_id:"",street:"",street2:"",city:"",state:"",zip:"",country:"",email:"",phone:"",mobile:"",company_name:""}),m=i.useRef(l);i.useEffect(()=>{m.current=l,S(m.current)},[]);const S=r=>{console.log("Fetching Countries and States");const a=`${y.baseURL}/api-proxy/proxy?method=get&resource=countrystate`;console.log(a),p.get(a,{headers:{Authorization:`Bearer ${g.get("jwt")}`}}).then(n=>{console.log(n.data.data),C([...r,...n.data.data])}).catch(n=>{console.error("Error fetching countries/states:",n)})},s=r=>{const{name:a,value:n}=r.target;h(c=>({...c,[a]:n})),a==="country"&&h(c=>({...c,state:""}))},v=()=>{const r=l.find(a=>a.code===t.country);return r&&r.state_ids?r.state_ids.map(a=>e.jsx(u,{value:a.code,children:a.name},a.code)):null},q=()=>{d(!0),console.log("Creating a customer");const r=`${y.baseURL}/api-proxy/proxy?method=post&resource=customers`;console.log(r);const a={partner:{name:t.name,street:t.street,street2:t.street2,city:t.city,state:t.state,zip:t.zip,country:t.country,email:t.email,phone:t.phone,mobile:t.mobile}};console.log("Request body",a),p.post(r,a,{headers:{Authorization:`Bearer ${g.get("jwt")}`}}).then(n=>{console.log(n.data),d(!1),j.push(`/customers/${n.data.result.partner_id}`)}).catch(n=>{console.error("Error fetching customers:",n)})},W=e.jsx(F,{sx:{width:"100%"},children:e.jsxs(x,{spacing:3,children:[e.jsx(o,{label:"Name",name:"name",value:t.name,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"Street",name:"street",value:t.street,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"Street2",name:"street2",value:t.street2,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"City",name:"city",value:t.city,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"Zip",name:"zip",value:t.zip,onChange:s,fullWidth:!0,required:!0}),e.jsxs(f,{name:"country",value:t.country,onChange:s,fullWidth:!0,displayEmpty:!0,required:!0,children:[e.jsx(u,{value:"",disabled:!0,children:"Select a Country"}),l.map(r=>e.jsx(u,{value:r.code,children:r.name},r.code))]}),t.country&&e.jsxs(f,{name:"state",value:t.state,onChange:s,fullWidth:!0,displayEmpty:!0,required:!0,children:[e.jsx(u,{value:"",disabled:!0,children:"Select a State/Province"}),v()]}),e.jsx(o,{label:"Email",name:"email",type:"email",value:t.email,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"Phone",name:"phone",value:t.phone,onChange:s,fullWidth:!0,required:!0}),e.jsx(o,{label:"Mobile",name:"mobile",value:t.mobile,onChange:s,fullWidth:!0,required:!0}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:q,loading:b,children:"Create"})]})});return e.jsxs(_,{children:[e.jsx(x,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"New Shipping Address"})}),W,e.jsx(A,{})]})}function k(){return B(),e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsx("title",{children:" New Shipping Address | BEX Dropship "})}),e.jsx(L,{})]})}export{k as default};
