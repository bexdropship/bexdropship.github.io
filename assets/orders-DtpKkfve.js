import{j as e,Q as ee,T as v,P as r,h as te,B as S,n as F,r as d,t as ne,R as re,K as ae,I as oe,U as se,C as ie,E as le,F as ce,S as de,V as ue,G as pe,W as he}from"./index-BFiUcMSv.js";import{T as k,a as u,b as xe,c as ge,d as fe,C as me,e as be,f as je,g as ye,h as _e}from"./search-fill-DHkkNxdw.js";import{O as Te}from"./Select-DpZMqgdZ.js";import{C as Ce}from"./Container-BDKlF4N9.js";import{C as Re}from"./Card-CAuByVYb.js";import{u as Se}from"./use-auth-km9F6DTz.js";const ke={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Oe(t,n,c){return t?Math.max(0,(1+t)*n-c):0}function B({query:t}){return e.jsx(k,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ee,{sx:{textAlign:"center"},children:[e.jsx(v,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(v,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}B.propTypes={query:r.string};const ve=te(S)(({theme:t,ownerState:n})=>{const c=t.palette.mode==="light",s=n.variant==="filled",i=n.variant==="outlined",o=n.variant==="soft",h={...n.color==="default"&&{...s&&{color:c?t.palette.common.white:t.palette.grey[800],backgroundColor:t.palette.text.primary},...i&&{backgroundColor:"transparent",color:t.palette.text.primary,border:`2px solid ${t.palette.text.primary}`},...o&&{color:t.palette.text.secondary,backgroundColor:F(t.palette.grey[500],.16)}}},g={...n.color!=="default"&&{...s&&{color:t.palette[n.color].contrastText,backgroundColor:t.palette[n.color].main},...i&&{backgroundColor:"transparent",color:t.palette[n.color].main,border:`2px solid ${t.palette[n.color].main}`},...o&&{color:t.palette[n.color][c?"dark":"light"],backgroundColor:F(t.palette[n.color].main,.16)}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",textTransform:"capitalize",padding:t.spacing(0,.75),fontSize:t.typography.pxToRem(12),fontWeight:t.typography.fontWeightBold,transition:t.transitions.create("all",{duration:t.transitions.duration.shorter}),...h,...g}}),I=d.forwardRef(({children:t,color:n="default",variant:c="soft",startIcon:s,endIcon:i,sx:o,...h},g)=>{const b=ne(),f={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return e.jsxs(ve,{ref:g,component:"span",ownerState:{color:n,variant:c},sx:{...s&&{pl:.75},...i&&{pr:.75},...o},theme:b,...h,children:[s&&e.jsxs(S,{sx:{mr:.75,...f},children:[" ",s," "]}),t,i&&e.jsxs(S,{sx:{ml:.75,...f},children:[" ",i," "]})]})});I.propTypes={children:r.node,endIcon:r.object,startIcon:r.object,sx:r.object,variant:r.oneOf(["filled","outlined","ghost","soft"]),color:r.oneOf(["default","primary","secondary","info","success","warning","error"])};function D({name:t,customer:n,create_date:c,amount_untaxed:s,amount_tax:i,amount_total:o,state:h,x_studio_notes:g,client_order_ref:b,ship_date:f,ship_tracking_number:O,handleClick:x}){const j=p=>`$${p.toFixed(2)}`;return e.jsxs(k,{hover:!0,tabIndex:-1,onClick:x,children:[e.jsx(u,{children:t}),e.jsx(u,{children:n}),e.jsx(u,{children:c}),e.jsx(u,{children:j(s)}),e.jsx(u,{children:j(i)}),e.jsx(u,{children:j(o)}),e.jsx(u,{children:e.jsx(I,{color:h!=="draft"&&"error"||"success",children:h})}),e.jsx(u,{children:g}),e.jsx(u,{children:b}),e.jsx(u,{children:f}),e.jsx(u,{children:O})]})}D.propTypes={name:r.any,customer:r.any,create_date:r.any,amount_untaxed:r.any,amount_tax:r.any,amount_total:r.any,state:r.any,x_studio_notes:r.any,client_order_ref:r.any,ship_date:r.any,ship_tracking_number:r.any,handleClick:r.func};function H({order:t,orderBy:n,headLabel:c,onRequestSort:s}){const i=o=>h=>{s(h,o)};return e.jsx(xe,{children:e.jsx(k,{children:c.map(o=>e.jsx(u,{align:o.align||"left",sortDirection:n===o.id?t:!1,sx:{width:o.width,minWidth:o.minWidth},children:e.jsxs(ge,{hideSortIcon:!0,active:n===o.id,direction:n===o.id?t:"desc",onClick:i(o.id),children:[o.label,n===o.id?e.jsx(S,{sx:{...ke},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},o.id))})})}H.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,headLabel:r.array,onRequestSort:r.func};function L({emptyRows:t,height:n}){return t?e.jsx(k,{sx:{...n&&{height:n*t}},children:e.jsx(u,{colSpan:9})}):null}L.propTypes={emptyRows:r.number,height:r.number};function W({filterName:t,onFilterName:n,onClickSearch:c,onHitEnter:s}){return e.jsx(re,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(Te,{value:t,onChange:n,onKeyDown:s,placeholder:"Search order...",endAdornment:e.jsx(ae,{position:"end",children:e.jsx(oe,{onClick:c,edge:"end",children:e.jsx(se,{icon:fe,sx:{color:"text.disabled",width:20,height:20}})})})})})}W.propTypes={filterName:r.string,onFilterName:r.func,onClickSearch:r.func,onHitEnter:r.func};function Pe(){const t=ie(),[n,c]=d.useState([]),[s,i]=d.useState(0),[o,h]=d.useState(0),[g,b]=d.useState("asc"),[f,O]=d.useState("name"),[x,j]=d.useState(""),[p,q]=d.useState(25),[z,V]=d.useState(0),P=d.useRef(n),w=d.useRef(p),N=d.useRef(s),$=d.useRef(x);d.useEffect(()=>{P.current=n,w.current=p,N.current=s,$.current=x,R(N.current,w.current,P.current,$.current)},[]);const R=(a,l,m,y,_,A)=>{console.log("Fetching Orders");const Z=a+1;let T=`${pe.baseURL}/api-proxy/proxy?method=get&resource=orders&page=${Z}&page_size=${l}`;y&&(T+=`&name=${y}`),_&&(T+=`&order=${_}`),A&&(T+=`&orderby=${A}`),console.log(T),le.get(T,{headers:{Authorization:`Bearer ${ce.get("jwt")}`}}).then(C=>{console.log(C.data.data),c([...m,...C.data.data]),V(C.data.count)}).catch(C=>{console.error("Error fetching orders:",C)})},U=(a,l)=>{console.log("Handling Sort");const m=f===l&&g==="asc";if(l!==""){const y=m?"desc":"asc",_=l;b(y),O(_),M(y,_)}},M=(a,l)=>{console.log(`Sorting ${l} ${a}`),i(0),h(0),R(0,p,[],x,a,l)},K=(a,l)=>{i(l);const m=p*l;m>o&&(h(m),R(l,p,n,x))},G=a=>{i(0),q(parseInt(a.target.value,10))},Q=a=>{j(a.target.value)},X=a=>{a.key==="Enter"&&E()},E=a=>{i(0),R(s,p,[],x)},J=(a,l)=>{t.push(`/orders/${l}`)},Y=!n.length&&!!x;return e.jsxs(Ce,{children:[e.jsx(de,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsxs(v,{variant:"h4",children:["Orders",e.jsx(me,{label:"Create",color:"primary",variant:"outlined",style:{marginLeft:"10px"},onClick:()=>t.push("/new-order")})]})}),e.jsxs(Re,{children:[e.jsx(W,{filterName:x,onFilterName:Q,onClickSearch:E,onHitEnter:X}),e.jsx(ue,{children:e.jsx(be,{sx:{overflow:"unset"},children:e.jsxs(je,{sx:{minWidth:800},children:[e.jsx(H,{order:g,orderBy:f,rowCount:n.length,onRequestSort:U,headLabel:[{id:"name",label:"Name"},{id:"shipping_addresses",label:"Shipping Addresses"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"x_studio_notes",label:"Notes"},{id:"client_order_ref",label:"PO Number"},{id:"ship_date",label:"Ship Date"},{id:"ship_tracking_number",label:"Tracking #"}]}),e.jsxs(ye,{children:[n.slice(s*p,s*p+p).map(a=>e.jsx(D,{name:a.name,customer:a.customer_id.name,create_date:a.create_date,amount_untaxed:a.amount_untaxed,amount_tax:a.amount_tax,amount_total:a.amount_total,state:a.state,x_studio_notes:a.x_studio_notes,client_order_ref:a.client_order_ref,ship_date:a.ship_date,ship_tracking_number:a.ship_tracking_number,handleClick:l=>J(l,a.id)},a.id)),e.jsx(L,{height:77,emptyRows:Oe(s,p,n.length)}),Y&&e.jsx(B,{query:x})]})]})})}),e.jsx(_e,{page:s,component:"div",count:z,rowsPerPage:p,onPageChange:K,rowsPerPageOptions:[25],onRowsPerPageChange:G})]})]})}function Be(){return Se(),e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsx("title",{children:" Order | BEX Dropship "})}),e.jsx(Pe,{})]})}export{Be as default};
