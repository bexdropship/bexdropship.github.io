import{j as e,O as Y,T as w,P as t,B as ee,Q as te,K as ne,I as se,R as re,C as ae,r as o,E as oe,F as ie,S as ce,U as le,G as de}from"./index-DzKCi557.js";import{T as R,a as l,b as ue,c as he,d as pe,e as xe,f as me,g as fe,h as ge}from"./search-fill-DYA922h7.js";import{O as ye}from"./Select-B1sm-onA.js";import{C as be}from"./Container-1mRqyzEp.js";import{C as je}from"./Card-ByWKekwp.js";const Te={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Se(s,a,d){return s?Math.max(0,(1+s)*a-d):0}function z({query:s}){return e.jsx(R,{children:e.jsx(l,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(Y,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}z.propTypes={query:t.string};function B({id:s,name:a,street:d,city:p,state:i,country:r,zip:c,phone:m,mobile:b,email:j,onSelect:f}){const C=()=>{f&&f({id:s,name:a,street:d,city:p,state:i,country:r,zip:c,phone:m,mobile:b,email:j})};return e.jsxs(R,{hover:!0,tabIndex:-1,onClick:C,children:[e.jsx(l,{children:a}),e.jsx(l,{children:d}),e.jsx(l,{children:p}),e.jsx(l,{children:i}),e.jsx(l,{children:r}),e.jsx(l,{children:c}),e.jsx(l,{children:m}),e.jsx(l,{children:b}),e.jsx(l,{children:j})]})}B.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,onSelect:t.func};function U({order:s,orderBy:a,headLabel:d,onRequestSort:p}){const i=r=>c=>{p(c,r)};return e.jsx(ue,{children:e.jsx(R,{children:d.map(r=>e.jsx(l,{align:r.align||"left",sortDirection:a===r.id?s:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(he,{hideSortIcon:!0,active:a===r.id,direction:a===r.id?s:"asc",onClick:i(r.id),children:[r.label,a===r.id?e.jsx(ee,{sx:{...Te},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}U.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function q({emptyRows:s,height:a}){return s?e.jsx(R,{sx:{...a&&{height:a*s}},children:e.jsx(l,{colSpan:9})}):null}q.propTypes={emptyRows:t.number,height:t.number};function H({filterName:s,onFilterName:a,onClickSearch:d,onHitEnter:p}){return e.jsx(te,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(ye,{value:s,onChange:a,onKeyDown:p,placeholder:"Search customer...",endAdornment:e.jsx(ne,{position:"end",children:e.jsx(se,{onClick:d,edge:"end",children:e.jsx(re,{icon:pe,sx:{color:"text.disabled",width:20,height:20}})})})})})}H.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function Re({showTitle:s,onSelect:a,filterTypeOption:d}){const p=ae(),[i,r]=o.useState([]),[c,m]=o.useState(0),[b,j]=o.useState(0),[f,C]=o.useState("asc"),[v,L]=o.useState("name"),[x,D]=o.useState(""),[T,Ce]=o.useState(d),[u,M]=o.useState(25),[W,_]=o.useState(0),N=o.useRef(i),E=o.useRef(u),k=o.useRef(c),I=o.useRef(x),O=o.useRef(T);o.useEffect(()=>{N.current=i,E.current=u,k.current=c,I.current=x,O.current=T,P(k.current,E.current,N.current,I.current,O.current)},[]);const P=(n,h,g,A,$,Pe)=>{console.log("Fetching Customers");const X=n+1;let S=`${de.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${X}&page_size=${h}`;A&&(S+=`&name=${A}`),$&&(S+=`&type=${$}`),console.log(S),oe.get(S,{headers:{Authorization:`Bearer ${ie.get("jwt")}`}}).then(y=>{console.log(y.data.data),r([...g,...y.data.data]),_(y.data.count)}).catch(y=>{console.error("Error fetching customers:",y)})},K=(n,h)=>{console.log("sort",h),h!==""&&(C(v===h&&f==="asc"?"desc":"asc"),L(h))},G=(n,h)=>{m(h);const g=u*h;g>b&&(j(g),P(h,u,i,x,T))},Q=n=>{m(0),M(parseInt(n.target.value,10))},V=n=>{D(n.target.value)},Z=n=>{n.key==="Enter"&&F()},F=n=>{m(0),P(c,u,[],x,T)},J=!i.length&&!!x;return e.jsxs(be,{children:[s&&e.jsx(ce,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"Shipping Addresses"})}),e.jsxs(je,{children:[e.jsx(H,{filterName:x,onFilterName:V,onClickSearch:F,onHitEnter:Z}),e.jsx(le,{children:e.jsx(xe,{sx:{overflow:"unset"},children:e.jsxs(me,{sx:{minWidth:800},children:[e.jsx(U,{order:f,orderBy:v,rowCount:i.length,onRequestSort:K,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"}]}),e.jsxs(fe,{children:[i.slice(c*u,c*u+u).map(n=>e.jsx(B,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,onSelect:a||(()=>p.push(`/customers/${n.id}`))},n.id)),e.jsx(q,{height:77,emptyRows:Se(c,u,i.length)}),J&&e.jsx(z,{query:x})]})]})})}),e.jsx(ge,{page:c,component:"div",count:W,rowsPerPage:u,onPageChange:G,rowsPerPageOptions:[25],onRowsPerPageChange:Q})]})]})}Re.propTypes={showTitle:t.bool,onSelect:t.func,filterTypeOption:t.string};export{Re as C};
