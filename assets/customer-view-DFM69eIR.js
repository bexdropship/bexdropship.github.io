import{j as e,Q as ne,T as N,P as n,B as se,R as re,K as oe,I as ae,U as ie,C as ce,r as a,E as le,F as de,S as ue,V as he,G as pe}from"./index-BCR1pe4k.js";import{T as w,a as d,b as xe,c as me,d as ge,e as fe,f as ye,g as be,h as je}from"./search-fill-C-jn2xJo.js";import{O as Se}from"./Select-DezMCzrF.js";import{C as Te}from"./Container-BizTsnAp.js";import{C as Re}from"./Card-N6P1_fiZ.js";const Ce={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Pe(s,o,h){return s?Math.max(0,(1+s)*o-h):0}function H({query:s}){return e.jsx(w,{children:e.jsx(d,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ne,{sx:{textAlign:"center"},children:[e.jsx(N,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(N,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}H.propTypes={query:n.string};function U({id:s,name:o,street:h,city:p,state:i,country:r,zip:c,phone:m,mobile:C,email:y,onSelect:b}){const v=()=>{b&&b({id:s,name:o,street:h,city:p,state:i,country:r,zip:c,phone:m,mobile:C,email:y})};return e.jsxs(w,{hover:!0,tabIndex:-1,onClick:v,children:[e.jsx(d,{children:o}),e.jsx(d,{children:h}),e.jsx(d,{children:p}),e.jsx(d,{children:i}),e.jsx(d,{children:r}),e.jsx(d,{children:c}),e.jsx(d,{children:m}),e.jsx(d,{children:C}),e.jsx(d,{children:y})]})}U.propTypes={id:n.any,name:n.any,street:n.any,city:n.any,state:n.any,country:n.any,zip:n.any,phone:n.any,mobile:n.any,email:n.any,onSelect:n.func};function q({order:s,orderBy:o,headLabel:h,onRequestSort:p}){const i=r=>c=>{p(c,r)};return e.jsx(xe,{children:e.jsx(w,{children:h.map(r=>e.jsx(d,{align:r.align||"left",sortDirection:o===r.id?s:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(me,{hideSortIcon:!0,active:o===r.id,direction:o===r.id?s:"asc",onClick:i(r.id),children:[r.label,o===r.id?e.jsx(se,{sx:{...Ce},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}q.propTypes={order:n.oneOf(["asc","desc"]),orderBy:n.string,headLabel:n.array,onRequestSort:n.func};function L({emptyRows:s,height:o}){return s?e.jsx(w,{sx:{...o&&{height:o*s}},children:e.jsx(d,{colSpan:9})}):null}L.propTypes={emptyRows:n.number,height:n.number};function D({filterName:s,onFilterName:o,onClickSearch:h,onHitEnter:p}){return e.jsx(re,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(Se,{value:s,onChange:o,onKeyDown:p,placeholder:"Search customer...",endAdornment:e.jsx(oe,{position:"end",children:e.jsx(ae,{onClick:h,edge:"end",children:e.jsx(ie,{icon:ge,sx:{color:"text.disabled",width:20,height:20}})})})})})}D.propTypes={filterName:n.string,onFilterName:n.func,onClickSearch:n.func,onHitEnter:n.func};function we({showTitle:s,onSelect:o,filterTypeOption:h}){const p=ce(),[i,r]=a.useState([]),[c,m]=a.useState(0),[C,y]=a.useState(0),[b,v]=a.useState("asc"),[E,M]=a.useState("name"),[x,W]=a.useState(""),[j,ve]=a.useState(h),[u,K]=a.useState(25),[V,G]=a.useState(0),$=a.useRef(i),k=a.useRef(u),O=a.useRef(c),I=a.useRef(x),F=a.useRef(j);a.useEffect(()=>{$.current=i,k.current=u,O.current=c,I.current=x,F.current=j,P(O.current,k.current,$.current,I.current,F.current)},[]);const P=(t,l,g,S,T,A,B)=>{console.log("Fetching Customers");const te=t+1;let f=`${pe.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${te}&page_size=${l}`;S&&(f+=`&name=${S}`),T&&(f+=`&type=${T}`),A&&(f+=`&order=${A}`),B&&(f+=`&orderby=${B}`),console.log(f),le.get(f,{headers:{Authorization:`Bearer ${de.get("jwt")}`}}).then(R=>{console.log(R.data.data),r([...g,...R.data.data]),G(R.data.count)}).catch(R=>{console.error("Error fetching customers:",R)})},Q=(t,l)=>{console.log("Handling Sort");const g=E===l&&b==="asc";if(l!==""){const S=g?"desc":"asc",T=l;v(S),M(T),Z(S,T)}},Z=(t,l)=>{console.log(`Sorting ${l} ${t}`),m(0),y(0),P(0,u,[],x,j,t,l)},_=(t,l)=>{m(l);const g=u*l;g>C&&(y(g),P(l,u,i,x,j))},J=t=>{m(0),K(parseInt(t.target.value,10))},X=t=>{W(t.target.value)},Y=t=>{t.key==="Enter"&&z()},z=t=>{m(0),P(c,u,[],x,j)},ee=!i.length&&!!x;return e.jsxs(Te,{children:[s&&e.jsx(ue,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(N,{variant:"h4",children:"Shipping Addresses"})}),e.jsxs(Re,{children:[e.jsx(D,{filterName:x,onFilterName:X,onClickSearch:z,onHitEnter:Y}),e.jsx(he,{children:e.jsx(fe,{sx:{overflow:"unset"},children:e.jsxs(ye,{sx:{minWidth:800},children:[e.jsx(q,{order:b,orderBy:E,rowCount:i.length,onRequestSort:Q,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"}]}),e.jsxs(be,{children:[i.slice(c*u,c*u+u).map(t=>e.jsx(U,{id:t.id,name:t.name,street:t.street,city:t.city,state:t.state_id.name,country:t.country_id.name,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email,onSelect:o||(()=>p.push(`/customers/${t.id}`))},t.id)),e.jsx(L,{height:77,emptyRows:Pe(c,u,i.length)}),ee&&e.jsx(H,{query:x})]})]})})}),e.jsx(je,{page:c,component:"div",count:V,rowsPerPage:u,onPageChange:_,rowsPerPageOptions:[25],onRowsPerPageChange:J})]})]})}we.propTypes={showTitle:n.bool,onSelect:n.func,filterTypeOption:n.string};export{we as C};
